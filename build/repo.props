<Project>
    <Import Project="$(RepositoryRoot)build\loc\Localization.props" Condition="'$(Localize)' == 'true'" />

    <Import Project="$(MSBuildThisFileDirectory)\arcade.props" />

    <!-- Properties to make KoreBuild more like dotnet/arcade. -->
    <PropertyGroup>
        <BuildDir>$(ArtifactsDir)$(Configuration)\packages\</BuildDir>
        <SkipArtifactVerification>true</SkipArtifactVerification>
        <GenerateSignRequest>false</GenerateSignRequest>
    </PropertyGroup>

    <!-- Manually find MicroBuild plugins because MicroBuild.Core doesn't work in dotnet.exe -->
    <PropertyGroup>
        <MicroBuildSentinelFile>packages\MicroBuild.Core.Sentinel.1.0.0\sentinel.txt</MicroBuildSentinelFile>
        <MicroBuildPluginDirectory>$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), $(MicroBuildSentinelFile)))</MicroBuildPluginDirectory>
        <MicroBuildPluginDirectory Condition="'$(MicroBuildPluginDirectory)' != ''">$(MicroBuildPluginDirectory)\packages</MicroBuildPluginDirectory>
        <MicroBuildPluginDirectory Condition="'$(MicroBuildOverridePluginDirectory)' != ''">$(MicroBuildOverridePluginDirectory)</MicroBuildPluginDirectory>
    </PropertyGroup>

    <PropertyGroup>
        <!-- Flow these properties down to the solution build -->
        <SolutionProperties Condition="'$(DelaySign)' != ''">$(SolutionProperties);DelaySign=$(DelaySign)</SolutionProperties>
        <SolutionProperties Condition="'$(SignAssembly)' != ''">$(SolutionProperties);SignAssembly=$(SignAssembly)</SolutionProperties>
    </PropertyGroup>

    <ItemGroup>
        <!-- UWP tests don't work in KoreBuild -->
        <ExcludeFromTest Include="$(RepositoryRoot)test\Microsoft.AspNet.SignalR.Client.UWP.Tests\Microsoft.AspNet.SignalR.Client.UWP.Tests.csproj" />

        <!-- Don't pack non-shipping utilities -->
        <ExcludeFromPack Include="$(RepositoryRoot)src\Microsoft.AspNet.SignalR.Crank\Microsoft.AspNet.SignalR.Crank.csproj" />
        <ExcludeFromPack Include="$(RepositoryRoot)src\Microsoft.AspNet.SignalR.Stress\Microsoft.AspNet.SignalR.Stress.csproj" />
        <ExcludeFromPack Include="$(RepositoryRoot)src\Microsoft.AspNet.SignalR.StressServer\Microsoft.AspNet.SignalR.StressServer.csproj" />
    </ItemGroup>
</Project>